define(["./config"],function(t){return{userInView:$('input[name="htg-user-name"]').val(),profileResults:$(".content-results"),contentInView:"my lists",myListsBtn:$(".lists-followers-toggle .my-lists"),listsFollBtn:$(".lists-followers-toggle .lists-following"),myFollowersBtn:$(".lists-followers-toggle .followers"),usersFollBtn:$(".lists-followers-toggle .following"),myListsSec:$(".all-my-lists"),listsFollSec:$(".all-lists-following"),saveEditBtn:$(".save-edit"),profUserName:$(".profile-name"),profUserList:$(".my-lists-full"),currEditList:null,currEditListH:0,editListForm:$(".edit-list"),editNameForm:$(".edit-name"),editingList:!1,editingName:!1,viewTags:$(".view-tags"),confirmDelListBtn:$(".delete-list-confirmation .confirm-delete"),cancelDelBtn:$(".delete-list-confirmation .cancel-delete"),deleteListConfirmation:$(".delete-list-confirmation"),toggleFollowUser:function(){$(".user-profile").on("mouseenter",".htg-user",function(){$(this).find(".htg-follow-user").length>0}),$(".user-profile").on("mouseleave",".htg-user",function(){$(this).find(".htg-follow-user").length>0}),$(".user-profile").on("click",".follow-user.follow",function(e){e.preventDefault();var i=this,s=$(this).attr("data-userid");$.ajax({type:"POST",url:t.baseUrl+"/profile/followUser",data:{foll_user_id:s},success:function(){var t=$(i).parent();$(t[0]).hasClass("profile-img")?($(".profile-img").removeClass("follow").addClass("unfollow"),$(i).text("-")):$(t[0]).hasClass("htg-follow-user")&&($(i).addClass("grey"),$(t[0]).find(".foll-text").text("Following")),$(i).removeClass("follow").addClass("unfollow")},error:function(){console.log("it failed")}})}),$(".user-profile").on("click",".follow-user.unfollow",function(e){e.preventDefault();var i=this,s=$(this).attr("data-userid");$.ajax({type:"POST",url:t.baseUrl+"/profile/unfollowUser",data:{foll_user_id:s},success:function(){var t=$(i).parent();if($(t[0]).hasClass("profile-img")?($(".profile-img").removeClass("unfollow").addClass("follow"),$(i).text("+")):$(t[0]).hasClass("htg-follow-user")&&($(i).removeClass("grey"),$(t[0]).find(".foll-text").text("Follow")),$(".user-profile").hasClass("editable")){var e=parseInt($(".lists-followers-toggle .following .count").text(),10)-1;$(".lists-followers-toggle .following .count").text(e),$(t).hide("1200").remove()}$(i).removeClass("unfollow").addClass("follow")},error:function(){console.log("it failed")}})})},toggleFollowList:function(){$(document).on("click",".follow-list.follow",function(e){e.preventDefault();var i=this,s=$(this).attr("data-listid");$.ajax({type:"POST",url:t.baseUrl+"/profile/followList",data:{foll_list_id:s},success:function(){var t=$(i).parent();$(t[0]).hasClass("htg-follow-list")&&($(i).addClass("grey"),$(t[0]).find(".foll-text").text("Following")),$(i).removeClass("follow").addClass("unfollow")},error:function(){console.log("it failed")}})}),$(document).on("click",".follow-list.unfollow",function(e){e.preventDefault();var i=this,s=$(this).attr("data-listid");$.ajax({type:"POST",url:t.baseUrl+"/profile/unfollowList",data:{foll_list_id:s},success:function(){var t=$(i).parent();if($(t[0]).hasClass("htg-follow-list")&&($(i).removeClass("grey"),$(t[0]).find(".foll-text").text("Follow")),$(i).removeClass("unfollow").addClass("follow"),"profile"===$('input[name="htg-page-name"]').val()&&$(".user-profile").hasClass("editable")){$(t[0]).parent().hide("1200").remove();var e=parseInt($(".lists-following .count").text(),10)-1;$(".lists-following .count").text(e),0===e&&($(".no-content .explanation.lists-foll").hasClass("hidden")&&($(".no-content .explanation").not(".lists-foll").addClass("hidden"),$(".no-content .explanation.lists-foll").removeClass("hidden")),$(".no-content").show())}},error:function(){console.log("it failed")}})})},toggleProfileBtns:function(){var t=this;t.myListsBtn.on("click",function(e){e.preventDefault(),t.getMyLists(t.userInView),$(".lists-followers-toggle a").not(this).hasClass("current")&&($(".lists-followers-toggle a").not(this).removeClass("current"),$(this).addClass("current"))}),t.listsFollBtn.on("click",function(e){e.preventDefault(),t.getListsFollowing(t.userInView),$(".lists-followers-toggle a").not(this).hasClass("current")&&($(".lists-followers-toggle a").not(this).removeClass("current"),$(this).addClass("current"))}),t.myFollowersBtn.on("click",function(e){e.preventDefault(),t.getMyFollowers(t.userInView),$(".lists-followers-toggle a").not(this).hasClass("current")&&($(".lists-followers-toggle a").not(this).removeClass("current"),$(this).addClass("current"))}),t.usersFollBtn.on("click",function(e){e.preventDefault(),t.getUsersFollowing(t.userInView),$(".lists-followers-toggle a").not(this).hasClass("current")&&($(".lists-followers-toggle a").not(this).removeClass("current"),$(this).addClass("current"))})},getMyLists:function(e){var i=this;$.ajax({type:"GET",url:t.baseUrl+"/profile/getMyLists",data:{username:e},dataType:"json",success:function(e){var s=e.lists,l=s.length,n=e.luser_lists_foll;$(".profile-results").empty(),l>0?($.each(s,function(e,i){var s=i,l=$(".my-lists-full.template").clone();if($(l).removeClass("template").removeAttr("style"),$(l).addClass("has-img"),$(l).attr("data-lid",s.list_id),$(l).find(".public-private").text(s.privacy),$(l).find(".list-id").text(s.list_id),$(l).find("a.list-title").attr("href",t.baseUrl+"/lists/view/"+s.username+"/"+s.friendly_url),$(l).find("h3").text(s.title),$(l).find("p").text(s.description),$(l).find(".my-list-hashtags .count").text(s.hashtag_count),$(l).find(".my-list-followers .count").text(s.followers_count),$.each(s.followers,function(t,e){$(l).find(".list-followers").append(""!==e.user_img?'<li class="user"><a href="'+e.username+'"><span class="user-img"><img src="'+e.user_img+'"/></span><span class="user-fullname">'+e.fullname+"</span></a></li>":'<li class="user"><a href="'+e.username+'"><span class="user-img"><img src="/webroot/img/default-post-user-img.jpg"/></span><span class="user-fullname">'+e.fullname+"</span></a></li>")}),$.each(s.hashtags,function(e,i){$(l).find(".list-tags").append(i.following?'<li class="htg follwn"><a href="#" class="htg-icon add-follow" title="'+i.tag+'">#</a><a href="#" class="htg-icon-remove remove-follow" title="'+i.tag+'" data-lid="'+i.list_id+'" data-lid-title="'+i.title+'">x</a><a href="'+t.baseUrl+"/tags/view/"+i.tag+'" class="htg-word">'+i.tag+"</a></li>":'<li class="htg nt-follwn"><a href="#" class="htg-icon add-follow" title="'+i.tag+'">#</a><a href="'+t.baseUrl+"/tags/view/"+i.tag+'" class="htg-word">'+i.tag+"</a></li>")}),$(".profile").hasClass("verified")&&$(l).append(""!==s.list_img||null!==s.list_img?'<div class="list-img" style="background-image:url('+s.list_img+')"></div>':'<div class="list-img" style="background-image:url(http://res.cloudinary.com/hshtags/image/upload/v1384145132/mia_drk_swk5od.png)"></div>'),$(l).find(".htg-follow-list").length>0){if(n.length>0)for(var a=0;a<n.length;a++)s.list_id===n[a].list_id&&($(l).find(".htg-follow-list .icon-save").removeClass("follow").addClass("unfollow"),$(l).find(".htg-follow-list .icon-save").addClass("grey"),$(l).find(".htg-follow-list .foll-text").text("Following"));$(l).find(".htg-follow-list .icon-save").attr("data-listid",s.list_id)}$(".user-profile").hasClass("editable")&&$(l).append('<span class="sprite-tool icon-delete htg-delete-list"></span><span class="sprite-tool icon-edit htg-edit-list"></span>'),"private"===s.privacy&&$(".user-profile").hasClass("editable")?($(l).find(".my-list-followers").before('<a href="#" class="foll-htg my-list-privacy"><span class="sprite-tool icon-list-privacy"></span></a>'),$(".profile-results").append(l)):"public"===s.privacy&&$(".profile-results").append(l),"true"===s.official&&$(l).prepend('<span class="official-taglist-sticker">Official Taglist</span>')}),$(".user-profile").hasClass("editable")&&$(".profile-results").append('<div class="my-lists-full hc1-3 new-list"><span class="sprite-site icon-new-list"></span></div>'),$(".no-content").hide()):($(".no-content .explanation.my-lists").hasClass("hidden")&&($(".no-content .explanation").not(".my-lists").addClass("hidden"),$(".no-content .explanation.my-lists").removeClass("hidden")),0===$(".no-content").find("button.create-list").length&&$(".no-content").append('<button class="create-list new-list">Create one now</button>'),$(".no-content").find("button.search-users").length>0&&$(".no-content").find("button.search-users").remove(),$(".no-content").show()),i.contentInView="my lists"},error:function(){console.log("it failed")}})},getListsFollowing:function(e){var i=this;$.ajax({type:"GET",url:t.baseUrl+"/profile/getListsFollowing",data:{username:e},dataType:"json",success:function(e){var s=e.lists_foll,l=s.length,n=e.luser_lists_foll;$(".profile-results").empty(),l>0?($.each(s,function(e,i){var s=i,l=$(".my-lists-full.template").clone();if($(l).removeClass("template").removeAttr("style"),$(l).attr("data-lid",s.list_id),$(l).find(".public-private").text(s.privacy),$(l).find(".list-id").text(s.list_id),$(l).find("a.list-title").attr("href",t.baseUrl+"/lists/view/"+s.username+"/"+s.friendly_url),$(l).find("h3").text(s.title),$(l).find(".list-title").after('<span class="by-user">by <a href="'+s.orig_creator_username+'" data-username="'+s.orig_creator_username+'">'+s.orig_creator+"</a></span>"),$(l).find("p").text(s.description),$(l).find(".my-list-hashtags .count").text(s.hashtag_count),$(l).find(".my-list-followers .count").text(s.followers_count),$.each(s.followers,function(t,e){$(l).find(".list-followers").append(""!==e.user_img?'<li class="user"><a href="'+e.username+'"><span class="user-img"><img src="'+e.user_img+'"/></span><span class="user-fullname">'+e.fullname+"</span></a></li>":'<li class="user"><a href="'+e.username+'"><span class="user-img"><img src="img/default-post-user-img.jpg"/></span><span class="user-fullname">'+e.fullname+"</span></a></li>")}),$.each(s.hashtags,function(e,i){$(l).find(".list-tags").append(i.following?'<li class="htg follwn"><a href="#" class="htg-icon add-follow" title="'+i.tag+'">#</a><a href="#" class="htg-icon-remove remove-follow" title="'+i.tag+'" data-lid="'+i.list_id+'" data-lid-title="'+i.title+'">x</a><a href="'+t.baseUrl+"/tags/view/"+i.tag+'" class="htg-word">'+i.tag+"</a></li>":'<li class="htg nt-follwn"><a href="#" class="htg-icon add-follow" title="'+i.tag+'">#</a><a href="'+t.baseUrl+"/tags/view/"+i.tag+'" class="htg-word">'+i.tag+"</a></li>")}),$(".user-profile").hasClass("editable")&&$(l).append('<div class="htg-follow-list"><span class="foll-text">Follow</span><span class="sprite-tool icon-save follow-list follow" data-listid="0"></span></div>'),$(l).find(".htg-follow-list").length>0){if(n.length>0)for(var a=0;a<n.length;a++)s.list_id===n[a].list_id&&($(l).find(".htg-follow-list .icon-save").removeClass("follow").addClass("unfollow"),$(l).find(".htg-follow-list .icon-save").addClass("grey"),$(l).find(".htg-follow-list .foll-text").text("Following"));$(l).find(".htg-follow-list .icon-save").attr("data-listid",s.list_id)}"true"===s.official&&$(l).prepend('<span class="official-taglist-sticker">Official Taglist</span>'),$(".profile-results").append(l)}),$(".no-content").hide()):($(".no-content .explanation.lists-foll").hasClass("hidden")&&($(".no-content .explanation").not(".lists-foll").addClass("hidden"),$(".no-content .explanation.lists-foll").removeClass("hidden")),$(".no-content").find("button.create-list").length>0&&$(".no-content").find("button.create-list").remove(),0===$(".no-content").find("button.search-users").length&&$(".no-content").append('<button class="search-users new-search">Search Users</button>'),$(".no-content").show()),i.contentInView="others lists"},error:function(){console.log("it failed")}})},getMyFollowers:function(e){var i=this;$.ajax({type:"GET",url:t.baseUrl+"/profile/getMyFollowers",data:{username:e},dataType:"json",success:function(e){var s=e.followers,l=s.length,n=e.luser_users_foll;$(".profile-results").empty(),l>0?($.each(s,function(e,i){var s=i,l=$(".htg-user.template").clone();if($(l).removeClass("template").removeAttr("style"),$(l).attr("data-uid",s.user_id),""!==s.user_img?$(l).find(".htg-user-img img").attr("src",s.user_img):$(l).find(".htg-user-img img").attr("src",t.baseUrl+"/webroot/img/default-post-user-img.jpg"),$(l).find(".htg-user-fullname a").attr("href",s.username),$(l).find(".htg-user-fullname a.fullname").text(s.fullname),$(l).find(".htg-user-fullname a.username").text("@"+s.username),$(l).find(".htg-follow-user").length>0){if(n.length>0)for(var a=0;a<n.length;a++)s.user_id===n[a].user_id&&($(l).find(".htg-follow-user .icon-save").removeClass("follow").addClass("unfollow"),$(l).find(".htg-follow-user .icon-save").addClass("grey"),$(l).find(".htg-follow-user .foll-text").text("Following"));$(l).find(".htg-follow-user .icon-save").attr("data-userid",s.user_id)}$(".profile-results").append(l)}),$(".no-content").hide()):($(".no-content .explanation.my-foll").hasClass("hidden")&&($(".no-content .explanation").not(".my-foll").addClass("hidden"),$(".no-content .explanation.my-foll").removeClass("hidden")),$(".no-content").find("button.create-list").length>0&&$(".no-content").find("button.create-list").remove(),0===$(".no-content").find("button.search-users").length&&$(".no-content").append('<button class="search-users new-search">Search Users</button>'),$(".no-content").show()),i.contentInView="followers"},error:function(){console.log("it failed")}})},getUsersFollowing:function(e){var i=this;$.ajax({type:"GET",url:t.baseUrl+"/profile/getUsersFollowing",data:{username:e},dataType:"json",success:function(e){var s=e.following,l=s.length,n=e.luser_users_foll;$(".profile-results").empty(),l>0?($.each(s,function(e,i){var s=i,l=$(".htg-user.template").clone();if($(l).removeClass("template").removeAttr("style"),$(l).attr("data-uid",s.user_id),""!==s.user_img?$(l).find(".htg-user-img img").attr("src",s.user_img):$(l).find(".htg-user-img img").attr("src",t.baseUrl+"/webroot/img/default-post-user-img.jpg"),$(l).find(".htg-user-fullname a").attr("href",s.username),$(l).find(".htg-user-fullname a.fullname").text(s.fullname),$(l).find(".htg-user-fullname a.username").text("@"+s.username),$(l).find(".htg-follow-user").length>0){if(n.length>0)for(var a=0;a<n.length;a++)s.user_id===n[a].user_id&&($(l).find(".htg-follow-user .icon-save").removeClass("follow").addClass("unfollow"),$(l).find(".htg-follow-user .icon-save").addClass("grey"),$(l).find(".htg-follow-user .foll-text").text("Following"));$(l).find(".htg-follow-user .icon-save").attr("data-userid",s.user_id)}$(".profile-results").append(l)}),$(".no-content").hide()):($(".no-content .explanation.user-foll").hasClass("hidden")&&($(".no-content .explanation").not(".user-foll").addClass("hidden"),$(".no-content .explanation.user-foll").removeClass("hidden")),$(".no-content").find("button.create-list").length>0&&$(".no-content").find("button.create-list").remove(),0===$(".no-content").find("button.search-users").length&&$(".no-content").append('<button class="search-users new-search">Search Users</button>'),$(".no-content").show()),i.contentInView="following"},error:function(){console.log("it failed")}})},toggleOnScrollProfile:function(){var e=$(".lists-followers-toggle").offset().top,i=e-e%100;t.winW<=768&&$(window).scroll(function(){$(window).scrollTop()>i?$(".top-sec").addClass("stuck"):$(".top-sec").removeClass("stuck")});var s=$(".top-sec").outerHeight();$(".bottom-sec").css("padding-top",s)},toggleEdit:function(){var t=this;$(".user-profile").on("mouseenter",".profile-name",function(){$(this).find(".htg-edit-name").length>0&&$(this).find(".htg-edit-name").show()}),$(".user-profile").on("mouseleave",".profile-name",function(){$(this).find(".htg-edit-name").length>0&&$(this).find(".htg-edit-name").hide()}),$(".user-profile").on("mouseenter",".my-lists-full",function(){t.editingList||($(this).find(".htg-edit-list").length>0&&($(this).find(".htg-edit-list").show(),$(this).find(".htg-delete-list").show()),$(this).find(".htg-follow-list").length>0&&$(this).find(".htg-follow-list").show())}),$(".user-profile").on("mouseleave",".my-lists-full",function(){$(this).find(".htg-edit-list").length>0&&($(this).find(".htg-edit-list").hide(),$(this).find(".htg-delete-list").hide()),$(this).find(".htg-follow-list").length>0&&$(this).find(".htg-follow-list").hide()})},editName:function(){var e=this;$(".user-profile").on("click",".htg-edit-name",function(t){t.preventDefault(),e.editingName||($(".prof-full-name").find(".fullname_text").hide(),$(".prof-full-name").find(".htg-edit-name").hide(),$(e.profUserName).append(e.editNameForm),$(e.editNameForm).show(),e.editingName=!0)}),$(".edit-name").on("click",".save-name",function(i){i.preventDefault();var s=$('.edit-name input[name="profile-name"]').val();$.ajax({type:"POST",url:t.baseUrl+"/profile/editName",data:{profileName:s},success:function(){e.editingName=!1,$(".prof-full-name").find(".fullname_text").text(s),$(".prof-full-name").find(".fullname_text").show(),$(".prof-full-name").find(".htg-edit-name").show(),$(e.editNameForm).hide()},error:function(){console.log("it failed")}})}),$(".edit-name").on("click",".cancel-edit",function(t){t.preventDefault(),e.editingName=!1,$(".prof-full-name").find(".fullname_text").show(),$(".prof-full-name").find(".htg-edit-name").show(),$(e.editNameForm).hide()})},editList:function(){var e=this;$(".user-profile").on("click",".htg-edit-list",function(i){if(i.preventDefault(),!e.editingList){e.currEditListLid=$(this).parent().attr("data-lid"),e.currEditList=$('.my-lists-full[data-lid="'+e.currEditListLid+'"]'),e.currEditListH=e.currEditList.outerHeight(),$(e.currEditList).find(".my-list-desc").hide(),$(e.currEditList).find(".htg-edit-list").hide(),$(e.currEditList).find(".htg-delete-list").hide(),$(e.currEditList).find(".official-taglist-sticker").length>0&&$(e.currEditList).find(".official-taglist-sticker").hide(),$(e.currEditList).find(".list-img").length>0&&$(e.currEditList).find(".list-img").hide(),$(e.currEditList).find(".list-tags").slideUp("200"),$(e.currEditList).find(".list-followers").slideUp("200"),$(e.currEditList).find(".my-list-followers").removeClass("current"),$(e.currEditList).find(".my-list-hashtags").removeClass("current"),$("."+e.editListForm[0].className+" .edit-tag-list").html("");var s=$(e.currEditList).find(".public-private").text(),l=$(e.currEditList).find(".list-id").text(),n=$(e.currEditList).find("h3").text(),a=$(e.currEditList).find("p").text(),o=$(e.currEditList).find(".my-list-followers .count").html(),r=$(e.currEditList).find(".my-list-hashtags .count").html(),d=$(e.currEditList).find(".list-tags li");"private"===s?($("."+e.editListForm[0].className+" .toggle-privacy.private").addClass("checked"),$("."+e.editListForm[0].className+" .toggle-privacy.public").removeClass("checked"),$("."+e.editListForm[0].className+" .toggle-privacy.private input").attr("checked","checked"),$("."+e.editListForm[0].className+" .toggle-privacy.public input").removeAttr("checked")):($("."+e.editListForm[0].className+" .toggle-privacy.public").addClass("checked"),$("."+e.editListForm[0].className+" .toggle-privacy.private").removeClass("checked"),$("."+e.editListForm[0].className+" .toggle-privacy.public input").attr("checked","checked"),$("."+e.editListForm[0].className+" .toggle-privacy.private input").removeAttr("checked")),$("."+e.editListForm[0].className+" .list-id").val(l),$("."+e.editListForm[0].className+" .list-title").val(n),$("."+e.editListForm[0].className+" .list-desc").val(a),$("."+e.editListForm[0].className+" .my-list-followers .count").text(""!==o?o:"0"),$("."+e.editListForm[0].className+" .my-list-hashtags .count").text(r),$(d).appendTo("."+e.editListForm[0].className+" .edit-tag-list"),$(e.currEditList).append(e.editListForm),$(e.editListForm).show();var f=$(e.editListForm).outerHeight();$("body").animate({scrollTop:$(e.currEditList).offset().top-t.headerH-30}),$(e.currEditList).animate({height:f}),e.editingList=!0}}),$(".edit-list").on("click",".toggle-privacy",function(){$(this).addClass("checked"),$(".toggle-privacy").not(this).removeClass("checked")}),$(".edit-list").on("keypress","textarea[name='add-list-tags']",function(t){var e=/[^A-z0-9/\s/]/g,i=e.test(String.fromCharCode(t.charCode));i?(t.preventDefault(),$(".tags-error").removeClass("hidden")):$(".tags-error").addClass("hidden")}),$(".edit-list").on("click",".save-list",function(i){i.preventDefault();var s={listId:$('.edit-list input[name="list-id"]').val(),listTitle:$('.edit-list input[name="list-title"]').val(),listDesc:$('.edit-list textarea[name="list-desc"]').val(),listPrivacy:$(".edit-list .toggle-privacy.checked input").val(),listTags:$('.edit-list textarea[name="add-list-tags"]').val()};$.ajax({type:"POST",url:t.baseUrl+"/lists/edit",data:s,dataType:"json",success:function(i){$(e.currEditList).find(".my-list-desc").show(),$(e.currEditList).find(".official-taglist-sticker").length>0&&$(e.currEditList).find(".official-taglist-sticker").show(),$(e.currEditList).find(".list-img").length>0&&$(e.currEditList).find(".list-img").show(),$(e.currEditList).find(".public-private").text(i.privacy),$(e.currEditList).find(".friendly-url").text(i.friendly_url),$(e.currEditList).find("a.list-title").attr("href",t.baseUrl+"/lists/view/"+i.username+"/"+i.friendly_url),$(e.currEditList).find("h3").text(i.title),$(e.currEditList).find("p").text(i.description),"private"===i.privacy?0===e.currEditList.find(".my-list-privacy").length&&e.currEditList.find("p").after('<a href="#" class="foll-htg my-list-privacy"><span class="sprite-tool icon-list-privacy"></span></a>'):e.currEditList.find(".my-list-privacy").length>0&&e.currEditList.find(".my-list-privacy").remove(),i.hashtags.length>0&&""!==i.hashtags[0]&&(0===e.currEditList.find(".add-follow").length&&e.currEditList.find(".edit-tag-list").empty(),$.each(i.hashtags,function(t,l){var n=l;e.currEditList.find(".edit-tag-list").append('<li class="htg follwn"><a href="#" class="htg-icon add-follow" title="'+n+'">#</a><a href="#" class="htg-icon-remove remove-follow" title="'+n+'" data-lid="'+s.listId+'" data-lid-title="'+i.title+'">x</a><a href="#" class="htg-word">'+n+"</a></li>")}));var l=$(".edit-tag-list li"),n=$(e.currEditList).find(".list-tags");$.each(l,function(t,e){$(e).find(".remove-follow").attr("data-lid-title",i.title)}),$(l).appendTo(n);var a=e.currEditList.find(".add-follow").length;e.currEditList.find(".my-list-hashtags .count").text(a),$('.add-to-existing select option[value="'+s.listId+'"]').text(i.title),$(e.editListForm).hide(),$(e.currEditList).animate({height:e.currEditListH}),$('.edit-list textarea[name="add-list-tags"]').val(""),$(".edit-list .tags-error").addClass("hidden"),e.editingList=!1},error:function(){console.log("it failed")}})}),$(".edit-list").on("click",".cancel-edit",function(t){t.preventDefault(),e.editingList=!1,$(e.currEditList).find(".my-list-desc").show(),$(e.currEditList).find(".official-taglist-sticker").length>0&&$(e.currEditList).find(".official-taglist-sticker").show(),$(e.currEditList).find(".list-img").length>0&&$(e.currEditList).find(".list-img").show();var i=$(".edit-tag-list li"),s=e.currEditList.find(".list-tags");$(i).appendTo(s),$(e.editListForm).hide(),$(e.currEditList).animate({height:e.currEditListH}),$('.edit-list textarea[name="add-list-tags"]').val(""),$(".edit-list .tags-error").addClass("hidden")})},delList:function(){var e=this;$(".user-profile").on("click",".htg-delete-list",function(i){i.preventDefault();var s=$(this).parent().attr("data-lid");$('.delete-list-confirmation input[name="list-id"]').val(s),t.overlay.fadeIn("1000",function(){e.deleteListConfirmation.fadeIn()})}),e.confirmDelListBtn.click(function(i){i.preventDefault();var s=$(".delete-list-confirmation input[name='list-id']").val();$.ajax({type:"POST",url:t.baseUrl+"/lists/delete",data:{delListID:s},success:function(){e.deleteListConfirmation.fadeOut("1000",function(){t.overlay.fadeOut(),$('.my-lists-full[data-lid="'+s+'"]').hide("1200",function(){$('.my-lists-full[data-lid="'+s+'"]').remove()}),$('.slides .list[data-lid="'+s+'"]').remove()}),$('.add-to-existing select option[value="'+s+'"]').remove();var i=parseInt($(".my-lists .count").text(),10)-1;$(".my-lists .count").text(i),0===i&&($(".my-lists-full.new-list").remove(),$(".no-content").show(),$(".no-content button").hasClass("hidden")&&$(".no-content button").removeClass("hidden"))},error:function(){console.log("it failed")}})}),e.cancelDelBtn.click(function(i){i.preventDefault(),e.deleteListConfirmation.fadeOut("1000",function(){t.overlay.fadeOut()})})},init:function(){this.getMyLists(this.userInView),this.toggleFollowUser(),this.toggleProfileBtns(),this.toggleEdit(),this.editName(),this.editList(),this.delList()}}});