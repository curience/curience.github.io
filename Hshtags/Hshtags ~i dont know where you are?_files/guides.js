define(["./config"],function(e){return{htgGuides:$(".htg-guide"),currGuide:"",showGuide:!1,guideOpen:!1,element:null,elementPos:0,elementH:0,guideTitle:"",guideDesc:"",searchGuideComplete:!1,checkGuides:function(t){var i=this;i.currGuide=t,$("body").find("#loadingDiv").length>0&&$("#loadingDiv").fadeOut(),$.ajax({url:e.baseUrl+"/guides/status",type:"GET",data:{guide:t},dataType:"json",success:function(e){var t=e;t?(i.showGuide=!1,"search"===i.currGuide?(i.searchGuideComplete=!0,$(".welcome-form").submit()):"default_homepage"===i.currGuide):(i.showGuide=!0,i.toggleGuide(i.showGuide))},error:function(){console.log("it failed")}})},completeGuide:function(){var t=this;$(".htg-guide").on("click",".htg-guide-done",function(i){var u=t.currGuide;i.preventDefault(),$.ajax({url:e.baseUrl+"/guides/complete",type:"POST",data:{guide:u},dataType:"json",success:function(){t.htgGuides.fadeOut("800",function(){e.overlay.fadeOut(),"search"===t.currGuide?(t.searchGuideComplete=!0,$(".welcome-form").submit()):"default_homepage"===t.currGuide||("adding_tags"===t.currGuide?$("body").animate({scrollTop:0}):"quick_lists"===t.currGuide),t.htgGuides.removeClass(t.currGuide),t.showGuide=!1,t.guideOpen=!1})},error:function(){console.log("it failed")}})})},toggleGuide:function(){var t=this;e.winW=$(window).width(),t.showGuide&&("search"===t.currGuide?(t.element=$(".landing h1"),t.elementPos=$(t.element).offset(),t.elementH=$(t.element).height()+20,t.elementPosLeft="50%",t.guideTitle="#guide : Search",t.guideDesc="Next time you want to search, just start typing.",t.promptGuide()):"default_homepage"===t.currGuide?(t.element=$(".posts-page").find(".posts-header h1"),t.elementPos=$(t.element).offset(),t.elementPosLeft=t.winW>576?$(t.element[0]).offset().left:$(".posts-page").offset().left,t.elementH=$(t.element).height()+20,t.guideTitle="#guide : Default Homepage",t.guideDesc="This will now be your default homepage. You can always change this in your settings.",t.promptGuide()):"adding_tags"===t.currGuide?(t.element=$(".posts-page").find(".htg-icon"),t.elementPos=$(t.element[0]).offset(),t.elementPosLeft=e.winW>576?$(t.element[0]).offset().left-35:$(".posts-page").offset().left,t.elementH=$(t.element[0]).find(".htg-icon").height()+52,t.guideTitle="#guide : Add Tag To List",t.guideDesc="Toggle these icons to save a tag to your lists.",t.promptGuide()):"quick_lists"===t.currGuide&&(t.element=$(".catgry-lists"),t.guideTitle="#guide :See All Lists",t.guideDesc="All of your lists can be easily accessed from the top nav.",t.elementPos=$(t.element).position(),t.elementPosLeft=t.winW/2-t.htgGuides.outerWidth()/2,t.elementH=$(t.element).outerHeight()+70,t.promptGuide()))},promptGuide:function(){var t=this;if($("body").find(".htg-guide").length>0){{$("body").scrollTop()}t.htgGuides.addClass(t.currGuide),t.htgGuides.css({top:t.elementPos.top+t.elementH,left:t.elementPosLeft}),e.overlay.fadeIn("800",function(){t.htgGuides.fadeIn(),("search"===t.currGuide||"quick_lists"===t.currGuide)&&t.htgGuides.css("position","fixed"),"search"===t.currGuide?(t.htgGuides.css("margin-left","-148px"),t.htgGuides.find(".htg-guide-carat").hide()):(t.htgGuides.css("margin-left","0px"),t.htgGuides.find(".htg-guide-carat").show()),t.htgGuides.find(".title").text(t.guideTitle),t.htgGuides.find("p").text(t.guideDesc),t.htgGuides.fadeIn(),"adding_tags"===t.currGuide&&t.elementPos.top>$(window).height()+150&&$("body").animate({scrollTop:t.elementPos.top-150})}),t.guideOpen=!0,t.completeGuide()}}}});