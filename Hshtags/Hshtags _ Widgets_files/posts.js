"use strict";var post_directives=angular.module("post.directives",[]),premium_page="premium"===$("body").attr("data-page-type")?!0:!1;post_directives.directive("postResults",[function(){var e=function(e,t){var s=angular.element(t);s.masonry({itemSelector:".post",columnWidth:10,isFitWidth:!0}),s.masonry("bindResize")};return{link:e}}]),post_directives.directive("postsHeader",["$window",function(e){var t=function(t,s){var o,i,a=e.innerHeight,n=(new ZeroClipboard(document.getElementById("copy_code_btn")),function(){a=e.innerHeight,o=$("header").height(),i=s.find(".header-wrapper").innerHeight(),s.find(".hero-img").height(a>600?a-(o+i):250)});!$("html").hasClass("touch")&&a>600?(n(),$(window).on("resize",n)):s.find(".hero-img").height(250)};return{link:t}}]),post_directives.directive("postItem",["$animate","timeago","$window","$rootScope","socialNetworks","htgTwitter","htgInstagram","htgFacebook","htgFlickr","htgVimeo","htgTumblr","conversationHelper","htgUser",function(e,t,s,o,i,a,n,r,l,p,d,c,h){var f=function(e,t){var i,a=e.post,n=$(window).width(),r="#HshtagsSearch";if("text"===e.post.post_type||"answer"===e.post.post_type||"status"===e.post.post_type)e.post.post_type="text",angular.isDefined(a.post_text.title)&&""!==a.post_text.title&&t.find(".post-body").append('<p class="title">'+a.post_text.title+"</p>"),angular.isDefined(a.post_text.body)&&""!==a.post_text.body&&null!==a.post_text.body&&(i=Autolinker.link(a.post_text.body,{newWindow:!0,className:"inline-link",twitter:!1,email:!1}),t.find(".post-body").append("<p>"+i+"</p>")),t.find(".share-tumblr").attr("href","http://www.tumblr.com/share/link?url="+encodeURIComponent(a.external_link)+"&name=Shared From Hshtags&description="+escape(r));else if("chat"===e.post.post_type)e.post.post_type="text",angular.isDefined(a.post_text.title)&&""!==a.post_text.title&&t.find(".post-body").append('<p class="title">'+a.post_text.title+"</p>"),angular.isDefined(a.post_text.body)&&""!==a.post_text.body&&null!==a.post_text.body&&(i=Autolinker.link(a.post_text.body,{newWindow:!0,className:"inline-link",twitter:!1,email:!1}),t.find(".post-body").append("<p>"+i+"</p>")),t.find(".share-tumblr").attr("href","http://www.tumblr.com/share/link?url="+encodeURIComponent(a.external_link)+"&name=Shared From Hshtags&description="+escape(r));else if("photo"===e.post.post_type||"image"===e.post.post_type){if(e.post.post_type="image",a.post_image instanceof Array||angular.isDefined(a.post_image[0])){var l=""!==a.post_image[0].width?a.post_image[0].width:400,p=""!==a.post_image[0].height?a.post_image[0].height:400,d=t.width(),f=d*p/l;isNaN(f)&&(f=400),t.find(".post-body").append('<div class="image-holder image-set" style="width:'+d+"px;height:"+f+'px;"></div>'),$.each(a.post_image,function(e,s){var o=s;t.find(".post-body .image-holder").append('<img class="htg-lazy" data-src-index="" data-src="'+o.src+'" width="'+o.width+'" height= "'+o.height+'"/>')}),t.find(".share-google").after('<a href="//www.pinterest.com/pin/create/button/?url='+encodeURIComponent(a.external_link)+"&media="+encodeURIComponent(a.post_image[0].url)+"&description="+escape(r)+'" data-pin-do="buttonPin" data-pin-config="above" class="popup share-pinterest" target="_blank" data-share-title="Pinterest"  data-width="700" data-height="400"><span class="pinterest-grey-sm"></span></a>'),t.find(".share-tumblr").attr("href","http://www.tumblr.com/share/photo?source="+encodeURIComponent(a.post_image[0].url)+"&caption="+escape(r)+"&clickthru="+encodeURIComponent(a.external_link))}else{var l=""!==a.post_image.width?a.post_image.width:400,p=""!==a.post_image.height?a.post_image.height:400,d=t.width(),f=d*p/l;isNaN(f)&&(f=400),t.find(".post-body").append('<div class="image-holder" style="width:'+d+"px;height:"+f+'px;"><img class="htg-lazy" data-src-index="" data-src="'+a.post_image.src+'" width="'+a.post_image.width+'" height= "'+a.post_image.height+'" /></div>'),t.find(".share-google").after('<a href="//www.pinterest.com/pin/create/button/?url='+encodeURIComponent(a.external_link)+"&media="+encodeURIComponent(a.post_image.src)+"&description="+escape(r)+'" data-pin-do="buttonPin" data-pin-config="above" class="popup share-pinterest" target="_blank" data-share-title="Pinterest"  data-width="700" data-height="400"><span class="pinterest-grey-sm"></span></a>'),t.find(".share-tumblr").attr("href","http://www.tumblr.com/share/photo?source="+encodeURIComponent(a.post_image.src)+"&caption="+escape(r)+"&clickthru="+encodeURIComponent(a.external_link))}angular.isDefined(a.post_image.title)&&""!==a.post_image.title&&null!==a.post_image.title&&t.find(".post-body").append('<p class="title">'+a.post_image.title+"</p>"),angular.isDefined(a.post_image.description)&&""!==a.post_image.description&&null!==a.post_image.description&&(i=Autolinker.link(a.post_image.description,{newWindow:!0,className:"inline-link",twitter:!1,email:!1}),t.find(".post-body").append("<p>"+i+"</p>"))}else if("video"===e.post.post_type||"audio"===e.post.post_type){{var g=angular.isDefined(a.post_video.src)?a.post_video.src.toString():a.post_src,u="";a.post_video.src}if(u=angular.isDefined(g)&&g.indexOf(".")>0?g.split(".").pop():"","tumblr"===a.social_network)"video"===a.post_type?(e.post.post_type="video",t.find(".post-body").append(a.post_video.src.search("instagram")>-1||a.post_video.src.search("vine")>-1?'<div class="video-holder square">'+a.post_video.src+"</div>":'<div class="video-holder">'+a.post_video.src+"</div>")):"audio"===a.post_type&&t.find(".post-body").append(angular.isDefined(a.post_audio.src)&&a.post_audio.src.search("iframe")>-1?'<div class="video-holder">'+a.post_audio.src+"</div>":'<div class="video-holder">'+a.post_src+"</div>");else if("mp4"===u||0===u.search("mp4"))if(e.post.post_type="video",/Chrome|Safari/i.test(navigator.userAgent))t.find(".post-body").append('<div class="video-holder square"><video width="400" height="400" controls><source src="'+a.post_video.src+'" type="video/mp4">Your browser does not support the video tag.</video></div>');else if("instagram"===a.social_network){var m=t.width();t.find(".post-body").append('<div class="image-holder video-thumb" data-video-src="'+a.post_video.src+'" style="width:'+m+"px;height:"+m+'px;"><span class="play-btn"><span class="play-white"></span></span><img class="htg-lazy" data-src-index="" src="'+a.post_video.thumb+'" width="480" height= "480" /></div>')}else t.find(".post-body").append('<div class="video-holder square"><iframe title="title" width="600" height="600" class="htg-lazy" data-src="'+a.post_video.src+'" frameborder="0" allowfullscreen></iframe></div>');else if(void 0!==a.post_video.src&&"undefined"!==a.post_video.src)if(e.post.post_type="video",a.post_video.src.search("instagram")>-1)t.find(".post-body").append('<div class="video-holder square"><iframe title="title" width="600" height="600" class="htg-lazy" data-src="'+a.post_video.src+'" frameborder="0" allowfullscreen></iframe></div>');else if(a.post_video.src.search("vine")>-1){var m=t.width();t.find(".post-body").append('<div class="image-holder video-thumb" data-video-src="'+a.post_video.src+'" style="width:'+m+"px;height:"+m+'px;"><span class="play-btn"><span class="play-white"></span></span><img class="htg-lazy" data-src-index="" src="'+a.post_video.thumb+'" width="480" height= "480" /></div>')}else t.find(".post-body").append('<div class="video-holder"><iframe title="title" width="600" height="600" class="htg-lazy" data-src="'+a.post_video.src+'" frameborder="0" allowfullscreen></iframe></div>');else e.post.post_type="video",t.find(".post-body").append('<div class="video-holder mia"></div>');angular.isDefined(a.post_video.title)&&""!==a.post_video.title&&null!==a.post_video.title?t.find(".post-body").append('<p class="title">'+a.post_video.title+"</p>"):angular.isDefined(a.post_audio.title)&&""!==a.post_audio.title&&t.find(".post-body").append('<p class="title">'+a.post_audio.title+"</p>"),angular.isDefined(a.post_video.description)&&""!==a.post_video.description&&null!==a.post_video.description?(i=Autolinker.link(a.post_video.description,{newWindow:!0,className:"inline-link",twitter:!1,email:!1}),t.find(".post-body").append("<p>"+i+"</p>")):angular.isDefined(a.post_audio.description)&&""!==a.post_audio.description&&(i=Autolinker.link(a.post_audio.description,{newWindow:!0,className:"inline-link",twitter:!1,email:!1}),t.find(".post-body").append("<p>"+i+"</p>")),t.find(".share-tumblr").attr("href","http://www.tumblr.com/share/video?embed="+encodeURIComponent('<iframe title="title" width="500" height="300" src="'+a.post_video.src+'" frameborder="0" allowfullscreen></iframe>')+"&caption="+escape(r))}else"link"===e.post.post_type?(e.post.post_type="text",t.find(".post-body").addClass("link"),angular.isDefined(a.post_link.image)&&""!==a.post_link.image?(t.find(".post-body").append('<div class="link_wrapper"><div class="link_img"><img src="'+a.post_link.image.url+'" /><div>'),angular.isDefined(a.post_link.title)&&""!==a.post_link.title&&t.find(".post-body").append('<div class="link_wrapper"><div class="link_text"><a href="'+a.post_link.src+'" target="_blank" class="title">'+a.post_link.title+"</a><p>"+a.post_link.description+"</p></div></div>")):angular.isDefined(a.post_link.title)&&""!==a.post_link.title&&null!==a.post_link.title&&t.find(".post-body").append('<div class="link_wrapper"><a href="'+a.post_link.src+'" class="title">'+a.post_link.title+"</a><p>"+a.post_link.description+"</p></div>"),"facebook"===e.post.social_network&&angular.isDefined(a.post_text.body)&&""!==a.post_text.body&&null!==a.post_text.body&&(i=Autolinker.link(a.post_text.body,{newWindow:!0,className:"inline-link",twitter:!1,email:!1}),t.find(".post-body").append("<p>"+i+"</p>")),t.find(".share-tumblr").attr("href","http://www.tumblr.com/share/link?url="+encodeURIComponent(a.external_link)+"&name=Shared From Hshtags&description="+escape(r))):"quote"===e.post.post_type&&(e.post.post_type="text",angular.isDefined(a.post_quote.quote)&&""!==a.post_quote.quote&&null!==a.post_quote.quote&&t.find(".post-body").append("<div>"+a.post_quote.quote+"</div>"),t.find(".share-tumblr").attr("href","http://www.tumblr.com/share/link?url="+encodeURIComponent(a.external_link)+"&name=Shared From Hshtags&description="+escape(r)));"googleplus"===e.post.social_network&&angular.isDefined(a.post_text.body)&&""!==a.post_text.body&&null!==a.post_text.body&&(i=Autolinker.link(a.post_text.body,{newWindow:!0,className:"inline-link",twitter:!1,email:!1}),t.find(".post-body").append("<p>"+i+"</p>")),t.on("click",".video-thumb",function(){var e=angular.element(this),t=e.attr("data-video-src");e.replaceWith('<div class="video-holder square"><iframe title="title" width="480" height="480" class="htg-lazy" src="'+t+'" frameborder="0" allowfullscreen></iframe></div>')}),t.find(".post-head img").error(function(){t.find(".post-head img").attr({src:"/webroot/img/default-user-img-grey@2x.png"})}),t.find(".post-body img").error(function(){t.find(".post-body .image-holder").css({width:"400px",height:"400px"}),t.find(".post-body img").attr({src:"/webroot/img/mia.png",width:"400px",height:"400px"})}),t.find("iframe").error(function(){t.find("iframe").parent().addClass("mia"),t.find("iframe").remove()}),""===t.find("p").text()&&t.find("p").remove(),t.on("click",".user-social a",function(){ga("send","event","post_extlink","click","post_external_link")}),t.find(".share-google").attr("href","https://plus.google.com/share?url="+encodeURIComponent(a.external_link)),t.find(".share-twitter").attr("href","https://twitter.com/share?url="+encodeURIComponent(a.external_link)+"&text="+escape(r)),t.find(".share-facebook").attr("href","https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(a.external_link));var v=32,_=v*t.find(".share-icons a").length;if(t.find(".share-icons").width(_),t.find(".share-icons").css("left",v-_),t.on("click",".share-icon",function(){var e=$(this).outerWidth(),s=t.find(".share-icons a"),o=$(this).closest(".post-share");if($(o).hasClass("open")){$(o).removeClass("open");var i=e-t.find(".share-icons").width()}else{$(o).addClass("open");var i=(e+e*s.length,e)}return t.find(".share-icons").animate({left:i}),ga("send","event","post_share","toggle","post_share_toggle"),!1}),"facebook"!==a.social_network&&"vine"!==a.social_network&&"googleplus"!==a.social_network&&"youtube"!==a.social_network&&(t.find(".post-conversation .inner-holder").append('<span class="conversation conv-icon no-auth"><span class="conversation-grey"></span></span>'),t.on("click",".conv-icon.no-auth",function(){$(".overlay").fadeIn(800,function(){""!==e.luser.user_id?($(".settings-auth h4").text("To respond inline to this post, please authorize or update your "+a.social_network+" account."),$(".settings-auth .buttons a:first-child").attr("href","/auth/login/"+a.social_network).text(a.social_network),$(".settings-auth").fadeIn()):($(".login-signup h4").text("To respond inline to this post, please sign up or log in."),$(".login-signup").fadeIn())}),ga("send","event","post_conversation","auth_alert",a.social_network+"_auth")})),""!==e.luser.user_id){var w={user_id:e.luser.user_id,id:a.post_id};c.get(t,a,a.social_network,e.luser,w)}t.on("click",".conv-icon",function(){if(!$(this).hasClass("engaged")&&!$(this).hasClass("notes")){var e=$(this).attr("data-social"),s=$(this).attr("data-action"),o=$(this).attr("data-id"),i=$(this).attr("data-luid"),a={id:o,user_id:i},n=angular.element(this),r=angular.element(".conv-icon."+s+'[data-id="'+o+'"]');c.engage(t,n,r,e,s,a),ga("send","event","post_conversation","engage",e+"_"+s)}}),t.on("click",".icon-conversation",function(e){e.preventDefault();var t=$(this).closest(".post-conversation");$(t).toggleClass("open")});var y=angular.element(".post.enlarge");t.on("click",".post-enlarge-btn",function(){if(n=$(window).width(),n>576){var s=t,i=($(s).html(),s[0].className),a=61,r=a*t.find(".share-icons a").length;y[0].className=i,y.hasClass("isotope-item")&&y.removeClass("isotope-item"),y.prepend('<div class="post-social"><span class="sprite-social orange icon-'+e.post.social_network+'"></span></div>'),y.find(".post-body").empty().append(t.find(".post-body").html()),y.find(".post-link-share").html(t.find(".post-link-share").html()),y.find(".post-link-share .post-share").addClass("open").width(a+a*t.find(".share-icons a").length),y.find(".share-icons").width(r),y.find(".share-icons").css("left",a),y.addClass("enlarge"),o.post_fullscreen=e.post,e.$apply(),y.find(".user-social .sprite-social").addClass("grey"),y.find(".icon-share").addClass("orange"),$(".enlarge-wrapper").fadeIn("800",function(){$(".enlarge-wrapper").scrollTop(0),$(".enlarge-wrapper").addClass("fullscreen"),$("body").addClass("locked")})}}),angular.element(".posts-page").hasClass("saved-posts")?e.post.saved_text="del":(e.post.saved_text="save",e.post.saved_id=""),t.on("click",".post-save-btn",function(){if("save"===angular.element(this).attr("data-save")){var s={user_id:e.luser.user_id,post:e.post};h.savePost(s,function(e){e.data.success?(t.find(".post-save-btn span").html("Saved"),setTimeout(function(){t.find(".post-save-btn span").hide()},4e3)):e.data.duplicate&&(t.find(".post-save-btn span").html("Saved"),setTimeout(function(){t.find(".post-save-btn span").hide()},4e3))})}else if("del"===angular.element(this).attr("data-save")){var o={user_id:e.luser.user_id,saved_id:e.post.saved_id};h.deleteSavedPost(o,function(e){e.data.success&&t.hide().remove()})}ga("send","event","post_save","click","post_save_btn")});var k=function(e){angular.forEach(e,function(e){var t=e.getBoundingClientRect();if(t.top>0&&t.top<window.innerHeight||t.top<document.documentElement.clientHeight){var s=$(e).find(".htg-lazy").attr("data-src");angular.isUndefined($(e).find(".htg-lazy").attr("src"))&&$(e).find(".htg-lazy").attr("src",s)}})},b=angular.element(".post-results"),C=b.length>0?b.masonry("getItemElements",t):[];if("now"===$("body").attr("data-page-type")){var x=b.prepend(t);b.masonry("addItems",x),b.masonry()}else if("premium"===$("body").attr("data-page-type")){if(C.length>0)if(C.indexOf(t)<0)b.masonry("addItems",t);else{var I=[];I.push(t),b.masonry("reveal",I)}}else if(C.indexOf(t)<0)b.masonry("addItems",t);else{var I=[];I.push(t),b.masonry("reveal",I)}var D=document.querySelectorAll(".post");if(imagesLoaded(D,function(){b.masonry()}),e.$parent.$last){var R=e.lazy_store=b.masonry("getItemElements");b.masonry("reloadItems"),D=document.querySelectorAll(".post"),imagesLoaded(D,function(){b.masonry()}),b.masonry("on","layoutComplete",function(){k(R)})}t.on("$destroy",function(){var e=[];e.push(t),b.masonry()}),s.onscroll=function(){k("premium"===$("body").attr("data-page-type")?angular.element(".post"):e.lazy_store)},$(".posts-wrapper").on("scroll",function(){k(e.lazy_store)}),$(".embed_wrapper").on("scroll",function(){k(e.lazy_store)});var U=t.width();$(window).on("resize",function(){var e=t.width();if(e!==U){U=e;var s=$(".post.image");$.each(s,function(e,t){var s=$(t).find(".image-holder").width(),o=$(t).find(".image-holder").height(),i=U,a=i*o/s;$(t).find(".image-holder").css({width:i,height:a})});var o=$(".post.vine");$.each(o,function(e,t){if($(t).find(".video-thumb").length>0){var s=$(t).find(".video-thumb").width(),o=$(t).find(".video-thumb").height(),i=U,a=i*o/s;$(t).find(".image-holder").css({width:i,height:a})}})}})};return{link:f,scope:{luser:"=",post:"=",elist:"=",nlist:"=",dtag:"=",power_user:"=poweruser",lazy_store:"=lazystore",list_extra_info:"=listextrainfo"},templateUrl:"/webroot/ng-views/posts/post-item.php"}}]),post_directives.directive("engageIcon",["htgTwitter",function(){function e(){}return{link:e,scope:{luser:"=",post:"="}}}]),post_directives.directive("postEnlargedWrapper",[function(){function e(e,t){function s(){t.fadeOut("800",function(){t.removeClass("fullscreen"),$("body").removeClass("locked"),t.find(".post-social").remove(),t.find(".post-body").empty(),t.find(".post-link-share").empty()})}t.find(".post-link-share").empty(),t.on("click",".close-post-enlarge",function(){s()}),$(document).keyup(function(e){(27==e.keyCode||27==e.which)&&s()}),t.on("click",".share-icon",function(){var e=61,s=t.find(".share-icons a"),o=$(this).closest(".post-share");if($(o).hasClass("open")){$(o).removeClass("open");var i=e}else{$(o).addClass("open");var i=e+e*s.length}return $(o).animate({width:i}),ga("send","event","post_share","toggle","post_share_toggle"),!1});var o;t.on("click",".popup",function(e){e.preventDefault();var t=$(this).attr("data-share-title"),s=$(this).attr("href");ga("send","event","share","share_"+t,"share_link:"+s);var i=$(this).attr("href"),a=$(this).attr("data-share-title"),n=$(this).attr("data-width"),r=$(this).attr("data-height");o=window.open(i,a,"width="+n+",height="+r),o.focus()})}return{link:e}}]),post_directives.directive("socialShareLink",[function(){var e,t=function(t,s){s.on("click",function(t){t.preventDefault();var o=s.attr("data-share-title"),i=s.attr("href");ga("send","event","share","share_"+o,"share_link:"+i);var a=s.attr("href"),n=s.attr("data-share-title"),r=s.attr("data-width"),l=s.attr("data-height");e=window.open(a,n,"width="+r+",height="+l),e.focus()})};return{link:t}}]),post_directives.directive("tagsToggle",["$rootScope","filterByTagHelper",function(e,t){var s=function(s,o){o.on("change","select",function(){var i=o.find("select").val(),a=[];a=t(s.allposts,i),e.$broadcast("saved_posts_filtered",a),$(".post-results").masonry()})};return{link:s,scope:{posts:"=",allposts:"="}}}]),post_directives.directive("filterToggle",["$filter","$rootScope","filterHelper","sortHelper","socialNetworks","postTypes",function(e,t,s,o,i,a){var n=function(e,o){{var n=(angular.element(".post-results"),o.find(".filter-toggle"),i),r=a,l=o.find(".filter-posts");o.find(".filter-toggle")}o.on("click",".filter-toggle",function(e){e.preventDefault();angular.element(this);$(this).toggleClass("active"),$(".filter-posts").not(l).removeClass("open"),l.toggleClass("open"),$(".posts-footer").removeClass("open"),$(".share-page").removeClass("open"),$(".share-toggle").removeClass("active"),ga("send","event","posts_filter","toggle","filter_toggle")}),o.on("click",".filter-posts span",function(){var i=angular.element(this),a=i.attr("data-filter-val"),n=i.attr("data-filter-type");if("post_type"===n?e.pfilters.post_type[a]=e.pfilters.post_type[a]===!1?!0:!1:"social_network"===n&&(e.pfilters.social_network[a]=e.pfilters.social_network[a]===!1?!0:!1),e.$apply(),o.hasClass("custom")){var r=[];r=s(e.allposts,e.pfilters,20),t.$broadcast("posts_filtered",r)}$(".post-results").masonry(),ga("send","event","posts_filter","filter_by:"+n,"filter_"+a)}),o.on("click",".filter-posts .reset-btn",function(){if(angular.forEach(n,function(t){e.pfilters.social_network[t]=!1}),angular.forEach(r,function(t){e.pfilters.post_type[t]=!1}),e.$apply(),o.hasClass("custom")){var i=[];i=s(e.allposts,e.pfilters,20),t.$broadcast("posts_filtered",i)}$(".post-results").masonry(),$(".filter-posts").not(l).removeClass("open"),$(".share-page").removeClass("open"),ga("send","event","posts_filter","reset","filter_reset")})};return{link:n,scope:{pfilters:"=",posts:"=",allposts:"="}}}]),post_directives.directive("sharePageToggle",["htgHshtags","socialNetworks","$routeParams","$location",function(e){var t=function(t,s){var o="";t.$watch("tag",function(){angular.isDefined(t.tag)&&(o="Check out #"+t.tag+" | ")}),t.$watch("list",function(){angular.isDefined(t.list)&&(o="Check out the "+t.list.title+" taglist | "),s.find(".share-tumblr").attr("href","http://www.tumblr.com/share/link?url="+encodeURIComponent(t.page_short_url)+"&name=Shared From Hshtags&description="+escape(o)),s.find(".share-google").attr("href","https://plus.google.com/share?url="+encodeURIComponent(t.page_short_url)),s.find(".share-twitter").attr("href","https://twitter.com/share?url="+encodeURIComponent(t.page_short_url)+"&text="+escape(o)),s.find(".share-facebook").attr("href","https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(t.page_short_url))}),t.$watch("page_short_url",function(){s.find(".share-tumblr").attr("href","http://www.tumblr.com/share/link?url="+encodeURIComponent(t.page_short_url)+"&name=Shared From Hshtags&description="+escape(o)),s.find(".share-google").attr("href","https://plus.google.com/share?url="+encodeURIComponent(t.page_short_url)),s.find(".share-twitter").attr("href","https://twitter.com/share?url="+encodeURIComponent(t.page_short_url)+"&text="+escape(o)),s.find(".share-facebook").attr("href","https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(t.page_short_url))});{var i=(s.find(".share-toggle"),s.find(".share-page"));s.find(".share-toggle")}s.on("click",".share-toggle",function(s){s.preventDefault();var o="";if(o={share:"http://hshtags.com"+location.pathname},""===t.page_short_url||void 0===t.page_short_url){e.share(o,function(e){t.page_short_url=""!==e.data.short_url?e.data.short_url:o.share})}$(this).toggleClass("active"),$(".share-page").not(i).removeClass("open"),i.toggleClass("open"),$(".posts-footer").removeClass("open"),$(".filter-posts").removeClass("open"),$(".filter-toggle").removeClass("active"),ga("send","event","page_share","toggle","page_share_toggle")})};return{link:t,scope:{tag:"=",list:"=",page_short_url:"=pageshorturl"}}}]),post_directives.directive("tagsListToggle",[function(){var e=function(e,t){t.on("click",function(){var e=t.find(".tags-list");$(".tags-list").not(e).removeClass("show"),$(".followers-list").removeClass("show"),e.toggleClass("show")})};return{link:e}}]),post_directives.directive("followersListToggle",[function(){var e=function(e,t){t.find("img").error(function(){t.find("img").attr({src:"/webroot/img/default-user-img-grey@2x.png"})}),t.on("click",function(){var e=t.find(".followers-list");$(".followers-list").not(e).removeClass("show"),$(".tags-list").removeClass("show"),e.toggleClass("show")})};return{link:e}}]),post_directives.directive("postsFooter",["$window",function(){var e=function(e,t){var s=$(window).width(),o=$("footer.posts-footer"),i=$(".post-results").length>0?$(".post-results").offset().top:0,a=$(".back-to-top"),n=!1,r=(new ZeroClipboard(document.getElementById("copy_code_btn_footer")),function(){768>s?(t.addClass("mobile"),t.show()):(t.hasClass("mobile")&&(t.removeClass("mobile"),t.hide()),!n&&$(".post-results").length>0?(l(),n=!0):n||"premium"!==$("body").attr("data-page-type")||(l(),n=!0))});$(window).on("resize",function(){s=$(window).width(),r()});var l=function(){i=$(".post-results").length>0?$(".post-results").offset().top:100,$(window).scrollTop()>i?(a.css("display","block").fadeIn("slow"),o.not(".mobile").css("display","none").fadeIn("slow")):(a.css("display","none").fadeOut("slow"),o.not(".mobile").css("display","none").fadeOut("slow")),$(window).on("scroll",function(){i=$(".post-results").offset().top,$(window).scrollTop()>i?(a.css("display","block").fadeIn("slow"),o.not(".mobile").css("display","none").fadeIn("slow")):(a.css("display","none").fadeOut("slow"),o.not(".mobile").css("display","none").fadeOut("slow")),$(".share-posts").hasClass("open")&&$(".share-page").removeClass("open"),$(".filter-posts").hasClass("open")&&$(".filter-posts").removeClass("open")})};o.on("click",".info-toggle",function(){o.toggleClass("open"),o.find(".share-page,.filter-posts").removeClass("open"),o.find(".share-toggle,.filter-toggle").removeClass("active")}),r()};return{link:e}}]),post_directives.directive("backToTop",["$window",function(){var e=function(e,t){t.on("click",function(){$("html,body").animate({scrollTop:0}),angular.element(".posts-wrapper").hasClass("sticky")&&angular.element(".posts-wrapper").animate({scrollTop:0})})};return{link:e}}]),post_directives.directive("leftWrapper",["$window",function(){var e=$(window).width();if($(".trending-column").length>0)var t=($(".trending-column"),$(".trending-column").width());else var t=0;var s=function(s,o){o.width(e-t),$(window).on("resize",function(){e=$(window).width(),t=$(".trending-column").length>0?$(".trending-column").width():0,o.width(e-t)})};return{link:s}}]),post_directives.directive("postsSpecialHeader",["$window",function(){var e=function(e,t){var s=$(window).height(),o=$(window).width(),i=$(window).scrollTop(),a=angular.element(".posts-wrapper").scrollTop(),n=angular.element(".posts-wrapper");if(o>576)var r=100,l=225;else var r=50,l=125;t.height(s-r),$(window).on("scroll",function(){i=$(window).scrollTop();var e=s-l;angular.element(".special-info .special-type").css("opacity",1-i/e),angular.element(".special-info .official-desc").css("opacity",1-i/e),i>=s-l&&(t.addClass("sticky"),n.addClass("sticky").css({height:s-(t.height()+r)}),angular.element(".special-info").addClass("hidden"))}),n.on("scroll",function(){i=$(window).scrollTop(),a=n.scrollTop()}),$(window).on("resize",function(){s=$(window).height(),o=$(window).width(),o>576?(r=100,l=225):(r=50,l=125),t.height(s-r),n.hasClass("sticky")&&n.css({height:s-(t.height()+r)})})};return{link:e}}]);