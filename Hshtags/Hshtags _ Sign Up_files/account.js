"use strict";var account_controllers=angular.module("account.controllers",[]);account_controllers.controller("AccountCtrl",["$scope","$rootScope","htgAccount",function(e){e.includes={simple_header:"/webroot/ng-views/common/simple-header.php",simple_footer:"/webroot/ng-views/common/simple-footer.php"}}]),account_controllers.controller("SignUpCtrl",["$scope","$rootScope",function(e,t){t.page={signup:!0,login:!1,settings:!1},e.new_user={htg_name:"",username:"",email:"",user_img:"//hshtags.com/webroot/img/default-profile-img.png",account_type:"free",site_updates:"subscribed",account_updates:"subscribed",user_type:"follower",social_auth:{},subscription_plan:{card:{month:"Month",year:"Year"}}}}]),account_controllers.controller("LoginCtrl",["$scope","$rootScope",function(e,t){t.page={signup:!1,login:!0,settings:!1},e.login_error="REMEMBER TO HOOK UP ERROR"}]),account_controllers.controller("SettingsCtrl",["$scope","$rootScope","loggedInUser","htgUser",function(e,t,r,a){t.page={signup:!1,login:!1,settings:!0},e.includes={delete_account:"/webroot/ng-views/modules/delete-account.php",upgrade_plan:"/webroot/ng-views/modules/upgrade-plan.php",downgrade_plan:"/webroot/ng-views/modules/downgrade-plan.php",edit_card:"/webroot/ng-views/modules/edit-card.php"};var o=r.luser.default_homepage.split("/"),s="tags"===o[0]?o[2]:"hshtags",i=19.99,n=1,l=5;e.default_hometag=s,e.default_homepage=r.luser.default_homepage,e.social_auth={facebook:r.luser.socials_authorized.indexOf("facebook")>-1?!0:!1,twitter:r.luser.socials_authorized.indexOf("twitter")>-1?!0:!1,instagram:r.luser.socials_authorized.indexOf("instagram")>-1?!0:!1,tumblr:r.luser.socials_authorized.indexOf("tumblr")>-1?!0:!1,vimeo:r.luser.socials_authorized.indexOf("vimeo")>-1?!0:!1,flickr:r.luser.socials_authorized.indexOf("flickr")>-1?!0:!1},e.social_expired={facebook:r.luser.socials_expired.indexOf("facebook")>-1?!0:!1,twitter:r.luser.socials_expired.indexOf("twitter")>-1?!0:!1,instagram:r.luser.socials_expired.indexOf("instagram")>-1?!0:!1,tumblr:r.luser.socials_expired.indexOf("tumblr")>-1?!0:!1,vimeo:r.luser.socials_expired.indexOf("vimeo")>-1?!0:!1,flickr:r.luser.socials_expired.indexOf("flickr")>-1?!0:!1},e.expired_auth_note="",r.luser.socials_expired.length>0&&(e.expired_auth_note="* Please reconnect your accounts to continue receiving posts from within your network."),e.power=!1,e.current_plan="Hshtags Basic",e.card={month:"Month",year:"Year",fullname:r.luser.fullname},e.show_update_btn=!1;var u={verb:r.luser.user_id};a.getSubscriptionPlan(u,function(t){if($.isEmptyObject(t.data.user))e.allow_trial=!0;else if("active"===t.data.user.status){e.power=!0,e.tag_subscriptions_count=t.data.user.tag_subscriptions_count+" tag subscriptions",e.card_number=t.data.user.stripe_card_last4,e.current_plan="trialing"===t.data.user.stripe_status?"Power Trial":"Power Plan",e.scus_id=t.data.user.stripe_customer_id,e.allow_trial=!1;var r=t.data.user.tag_subscriptions_count>n?(t.data.user.tag_subscriptions_count-n)*l+i:i;if(e.current_plan_price="$"+r.toFixed(2),"trialing"===t.data.user.stripe_status){var a=new Date(1e3*t.data.user.stripe_trial_end);e.trial_end_date="trialing"===t.data.user.stripe_status?a.toDateString():""}else e.trial_end_date="";e.power_trial="trialing"===t.data.user.stripe_status?!0:!1}else e.allow_trial=!1;e.show_update_btn=!0}),t.$on("plan_updated",function(t,r){if(e.power=r.power,r.power){if(void 0!==r.card_number&&(e.card_number=r.card_number),r.account_type&&(e.current_plan="power_trial"===r.account_type?"Power Trial":"Power Plan",r.trial_end)){var a=new Date(1e3*r.trial_end);e.trial_end_date="power_trial"===r.account_type?a.toDateString():""}e.current_plan_price="$19.99",e.tag_subscriptions_count="1 tag subscription"}else e.current_plan="Basic",e.trial_end_date="",e.power_trial=!1})}]);